# ARC064

## D
カテゴリ: ゲーム

ポイントは、sが操作できないことと s = ababab... の形であることが同値であることである。

最初にsの両端が同じ文字の場合を考える。
|s| = 3 ならば s = axa の形である。これは明らかに後手の勝ちである。
|s| = 4 ならば s = axya の形である。これは明らかに先手の勝ちである。
|s| = 5 の場合、 s = ababa の形ならば 先手は操作を行えないので後手の勝ちである。
そうでない形の場合、先手は操作を行えるが、|s| = 4 を後手に渡すので後手の勝ちである。
|s| >= 6 に関しても、同様に |s| が偶数ならば先手の勝ち、奇数ならば後手の勝ちであることが分かる。

次にsの両端が異なる文字の場合を考える。
|s| = 3 ならば s = axb の形である。これは明らかに先手の勝ちである。
|s| = 4 ならば s = axyb の形である。これは明らかに後手の勝ちである。
|s| = 5 の場合、 先手は操作を行え、|s| = 4 を後手に渡すので先手の勝ちである。
|s| = 6 の場合、 s = ababab の形ならば先手は操作を行えないので後手の勝ちである。
そうでない形の場合、先手は操作を行えるが、 |s| = 5 を後手に渡すので後手の勝ちである。
|s| >= 7 に関しても、 同様に |s| が奇数ならば先手の勝ち、偶数ならば後手の勝ちであることが分かる。

## E
カテゴリ: 最短経路

点(x_s, y_s), 点(x_t, y_t), 各バリアを頂点とした完全グラフG(V, E)を考える。
Gの頂点iについて、f(i)を以下で定める。

* iが点(x_s, y_s)に対応するならばf(i) = (x_s, y_s, 0)
* iが点(x_t, y_t)に対応するならばf(i) = (x_t, y_t, 0)
* iがバリアjに対応するならばf(i) = (x_j, y_j, r_j)

Gの頂点i, j について、 f(i) = (x, y, r), f(j) = (x', y', r') として、
i, jを結ぶ辺の重みを max(0, sqrt((x - x')^2 + (y - y')^2) - (r + r')) とする。
Gにおける、(x_s, y_s) に対応する頂点から (x_t, y_t) に対応する頂点までの最短距離が解である。
