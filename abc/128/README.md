# ABC128

## A
カテゴリ: 実装

解は floor(3A + P / 2) である。

## C
カテゴリ: 全探索

すべてのスイッチのon/offの状態の組合せを試し、全ての電球が点灯する組合せを数え上げればよい。

## D
カテゴリ: 全探索

操作 A を a 回、操作 B を b 回、操作 C を c 回実行（価値の低い宝石から順に実行する）
したときの宝石の価値の合計 U(a, b, c) を求める。
各a, b, c について U(a, b, c) を求め、最大値を解とすればよい。

## F
カテゴリ: 全探索

N' = N - 1, D = A - B とする。
D = 1, ..., N' について、 M = N' % D とする。
A は kD + M の形で表せる (k は非負整数)。
K = floor(N' / D) とすれば、各 D について、解の候補となる A は
KD + M, (K - 1)D + M, (K - 2)D + M, ..., M である（これは、O(K） = O(N / D) 個しか存在しないことに注意せよ)。

A = KD + M のとき、 最終得点は s_{KD + M} である。
A = (K - 1)D + M のとき、 最終得点は s_{KD + M} + s_{D} + s_{(K - 1)D + M} である。
A = (K - 2)D + M のとき、 最終得点は s_{KD + M} + s_{D} + s_{(K - 1)D + M} + s_{2D} + s_{(K - 2)D + M}である。
一般に、A = (K - l)D + M のとき、 最終得点は s_{KD + M} + s_{D} + s_{(K - 1)D + M} + s_{2D} + s_{(K - 2)D + M} + ... + s_{lD} + s_{(K - l)D + M} である。
ただし、同一の添字が出現したらそこで打ち切ることになる（集合型を用いてうまく判定する）。

したがって、各 D について、候補となる各 A について、最終得点を合計 O(K) で求められる。
以上より、各 D について、候補となる各 Aについて、 全探索しても計算量は O(floor(N / 1) + floor(N / 2) + ... + floor(N / N)) = O(NlogN) であるので、全探索して解を求めればよい。
